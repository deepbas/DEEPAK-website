---
title: "Case Study: Random Forest"
subtitle: "<br/> Fall 2022"
author: "Bastola"
date: "`r format(Sys.Date(), ' %B %d %Y')`"
output:
  xaringan::moon_reader:
    css: ["default", css/xaringan-themer-solns.css, css/my-theme.css, css/my-font.css]
    lib_dir: libs
    chakra: libs/remark-latest.min.js
    seal: false
    nature:
      highlightStyle: googlecode  #http://arm.rbind.io/slides/xaringan.html#77 # idea, magula
      highlightLines: true
      highlightLanguage: ["r", "css", "yaml"]
      countIncrementalSlides: true
      slideNumberFormat: "%current%"
      titleSlideClass: ["left", "middle", "inverse"]
      ratio: "16:9"
    includes:
      in_header: header.html
editor_options: 
  chunk_output_type: console
header-includes:
    - \usepackage{caption}
---


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
options(htmltools.preserve.raw = FALSE)
options(ggrepel.max.overlaps = Inf)

knitr::opts_chunk$set(echo = TRUE, 
                      dev = 'svg',
                      collapse = TRUE, 
                      comment = NA,  # PRINTS IN FRONT OF OUTPUT, default is '##' which comments out output
                      prompt = FALSE, # IF TRUE adds a > before each code input
                      warning = FALSE, 
                      message = FALSE,
                      fig.height = 3, 
                      fig.width = 4,
                      out.width = "100%",
                      prompt = FALSE,
                      rows.print=7
                      )



# load necessary packages
library(tidyr)
library(dplyr)
library(ggplot2)
library(countdown)
library(ggthemes)
library(tidyverse)
library(stringr)
library(xaringanExtra)
xaringanExtra::use_panelset()
xaringanExtra::use_tachyons()
library(flipbookr)
library(htmlwidgets)
library(lubridate)
library(palmerpenguins)
library(fontawesome)
library(caret)
library(class)
library(patchwork)
library(tidymodels)
library(mlbench)     # for PimaIndiansDiabetes2 dataset
library(janitor)
library(parsnip)
library(kknn)
library(paletteer)
library(corrr)
library(scico)
library(skimr)
library(janitor)
library(vip)
library(rpart.plot)
library(ranger)
library(palmerpenguins)
library(ISLR2)
library(forcats)


select <- dplyr::select

# Set ggplot theme
# theme_set(theme_stata(base_size = 10))

yt <- 0
```




```{r xaringanExtra-clipboard, echo=FALSE}
htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    error_text = "<i class=\"fa fa-times-circle\" style=\"color: #F94144\"></i>"
  ),
  rmarkdown::html_dependency_font_awesome()
)
```


layout: true
  
---

class: title-slide, middle

# .fancy[Unlocking the Power of Machine Learning]
## .fancy[Address Formatting Correctness Prediction]
### .fancy[Spring 2023]

`r format(Sys.Date(), ' %B %d %Y')`

---


class: inverse, middle



.bql[# Example - Detecting Typos in Addresses
Consider the task of detecting typos in street addresses. A machine learning model could be trained to classify addresses as correct or incorrect based on various features, one of which could be the .b[Levenshtein distance] from a known correct address.
]


---

class: middle

# Examples of Addresses

.pull-left[
.bq.font80[
## Correct Addresses
1. 530 5th St E, Northfield, MN, 55057
2. 123 Main St, Los Angeles, CA, 90034
3. 789 Broadway, Apt 12B, New York, NY, 10025
4. 456 Pine Ave, San Francisco, CA, 94108
5. 159 River Rd, Boston, MA, 02115
]
]
.pull-right[
.bq.font80[## Incorrect Addresses
1. 530 5th Street East, North, MN, 55057
2. 123 Mian Street, Los Angeles, CA, 9003
3. 78 Broadway, Apt 12B, New York, NY, 10025
4. 456Pine Avenue, San Francisco, CA, 94108
5. 159 River Rd, Bosotn, MA, 02115
]
]


---

class: middle

# The Problem
## Incorrect and inconsistently formatted addresses

.pull-left[
.bql.font80[
- Inconsistently formatted addresses pose a significant problem in data management and analysis.
- They can lead to inaccurate data matching, ineffective communication, and inefficiencies in logistics and delivery services.
- Incorrect addresses can also pose security issues and lead to lost business opportunities.
]
]
.pull-right[
.bql.font80[
- Address standardization and validation is crucial in various domains such as e-commerce, logistics, healthcare, and public services.
- Data scientists often need to assess the validity of addresses, correct them where possible, or flag potential issues for further investigation.
]
]


.hljs[Our aim is to develop a machine learning model that can predict if a given address is correctly formatted based on various features.]

---

class: middle

# One Potential Solution: Random Forest for Address Formatting

.pull-left[
## Why Random Forest?
.bq.font80[
- .highlight[Ability to handle complex patterns]: Addresses can have diverse and complex patterns
- .highlight[Robust to overfitting]: The ensemble nature of Random Forest makes it less likely to overfit compared to simpler models
- .highlight[Feature importance]: Random Forest provides a straightforward way to measure the importance of each feature
]
]


.pull-right[
## Training Random Forest
.bq.font80[
- The Random Forest model is trained using our dataset, which contains both correctly and incorrectly formatted addresses.
- Each address is represented by a set of features such as its length, number of words, presence of apartment number, zip code correctness, etc.
- Our model learns to predict the correctness of an address based on these features.
]
]

---

class: middle

# Feature and Feature Engineering

.pull-left[

.bql[
"Length"               
"Number of Words"      
"State Code"          
"Zip Code"           
"Levenshtein Distance"  
"Presence of apt no"    
"Presence of street no"   
]

]

.pull-right[
.bql[

"Presence of street name" 
"Presence of city"      
"Presence of state"     
"Presence of zip code"   
"State code correctness" 
"Zip code correctness"
"Typo in street name" 

]


]




---

class: middle

#  Levenshtein distance

.hljs[Levenshtein distance is a tool used for quantifying the difference between two sequences by calculating the minimum number of single-character edits needed to transform one string into the other.]

.bqt.font80[

- This measure utilizes three types of edits: insertions, deletions, and substitutions.

- Due to its ability to assess string similarity and difference, Levenshtein distance finds extensive use in applications where such determinations are necessary.
]


.footnote[Levenshtein, Vladimir I. "Binary codes capable of correcting deletions, insertions, and reversals." In Soviet physics doklady, vol. 10, no. 8, pp. 707-710. 1966.]

---

class: middle

# Calculation of Levenshtein Distance

.hljs[Let's consider two strings: kitten and sitting. To transform "kitten" into "sitting" we could:]

.bql.font90[
- Substitute "k" with "s" - sitting
- Substitute "e" with "i" - sittin
- Append "g" - sitting
]

.blue-h[The Levenshtein distance between "kitten" and "sitting" is therefore 3.]

---


class: middle

# R code for calculating Levenshtein Distance for Address Validation


```{r, eval=FALSE}
# Calculate the Levenshtein distance between the provided and correct address
levenshtein_distance <- stringdist::stringdist(address, correct_address)
```


---

class: middle

# Other examples

In addition to address validation, the Levenshtein distance can be used in a wide range of other applications. 

.bq.font90[
- DNA sequence alignment in bioinformatics
- Spell checking and correction
- Duplicate detection in data cleaning.
]

---

class: action, middle

# <i class="fa fa-pencil-square-o" style="font-size:48px;color:purple">&nbsp;Group&nbsp;Activity&nbsp;`r (yt <- yt + 1)`</i>    


.pull-left-40[
![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)
]
.pull-right-60[
<br>
.bq[
- Get the class activity 27.Rmd file from  [moodle](https://moodle.carleton.edu/course/view.php?id=39491) 
- Let's work on group activity 1 together
]

]

`r countdown(minutes = 20, seconds = 00, top = 0 , color_background = "inherit", padding = "3px 4px", font_size = "2em")`
