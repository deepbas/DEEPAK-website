---
title: "Data Objects in R"
subtitle: "<br/> Spring 23"
author: "Bastola"
date: "`r format(Sys.Date(), ' %B %d %Y')`"
output:
  xaringan::moon_reader:
    css: ["default", css/xaringan-themer-solns.css, css/my-theme.css, css/my-font.css]
    lib_dir: libs
    chakra: libs/remark-latest.min.js
    seal: false
    nature:
      highlightStyle: googlecode  #http://arm.rbind.io/slides/xaringan.html#77 # idea, magula
      highlightLines: true
      highlightLanguage: ["r", "css", "yaml"]
      countIncrementalSlides: true
      slideNumberFormat: "%current%"
      titleSlideClass: ["left", "middle", "inverse"]
      ratio: "16:9"
    includes:
      in_header: header.html
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
options(htmltools.preserve.raw = FALSE)
options(ggrepel.max.overlaps = Inf)

knitr::opts_chunk$set(echo = TRUE, 
                      dev = 'svg',
                      collapse = TRUE, 
                      comment = NA,  # PRINTS IN FRONT OF OUTPUT, default is '##' which comments out output
                      prompt = FALSE, # IF TRUE adds a > before each code input
                      warning = FALSE, 
                      message = FALSE,
                      fig.height = 3, 
                      fig.width = 4,
                      out.width = "100%",
                      prompt = FALSE
                      )

# load necessary packages
library(tidyverse)
library(dplyr)
library(countdown)
library(mosaic)
library(ggthemes)
library(xaringanExtra)
library(forcats)
xaringanExtra::use_panelset()
xaringanExtra::use_tachyons()
xaringanExtra::use_clipboard()
xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,         
  mute_unhighlighted_code = TRUE  
)
library(flipbookr)
library(patchwork)
library(DT)
library(moderndive)
library(knitr)
library(grid)
library(gridExtra)
library(palmerpenguins)
library(broom)
library(ggResidpanel)
library(keras)
library(tensorflow)

select <- dplyr::select

# Set ggplot theme
theme_set(theme_tufte(base_size = 10))

yt <- 0

# read.csv("https://raw.githubusercontent.com/deepbas/statdatasets/main/agstrat.csv")
# https://github.com/intro-to-data-science-21/labs/blob/main/session-7-visualization/7-visualization.Rmd
```


```{r xaringanExtra-clipboard, echo=FALSE}
htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    error_text = "<i class=\"fa fa-times-circle\" style=\"color: #F94144\"></i>"
  ),
  rmarkdown::html_dependency_font_awesome()
)
```


layout: true
  
---

class: title-slide, middle

# .fancy[Data Objects in R]

### .fancy[Spring 23]

`r format(Sys.Date(), ' %B %d %Y')`

---


class: middle

#  Object Oriented Programming in R

.bql.font90[

- R uses object-oriented programming (OOP) principles
- Functions in R are designed to work with specific object classes and types
- Example: `plot()` function behaves differently based on the input object

]


---

# `plot()` Function Examples

Scatterplot with `plot()`:

```{r, eval=FALSE}
plot(y ~ x, data = mydata)  # If x and y are numeric, creates a scatterplot
```

--

Diagnostic plots with `plot()`:

```{r, eval=FALSE}
my_lm <- lm(y ~ x, data = mydata)  # Create a linear model
plot(my_lm)  # Produces diagnostic plots for the linear model
```


.bq.font90[
- The `plot()` function adapts its behavior based on the input object's class and type
- This allows for efficient and intuitive coding in R
]

---

class: middle

# Data structures and types in R



.bq.font90[

- R objects are based on vectors

- Two functions to examine objects:

  - `typeof()`: Returns the storage mode (data type) of an object
  - `class()`: Provides further description of an object
  
- NULL: Represents an empty object (vector of length 0)
]

 

---

class: middle

#  Examples of Data Types and Functions

.pull-left[
Numeric and integer data types:


```{r}
x <- c(8, 2, 1, 3)
typeof(x)  # "double" (numeric)

x_int <- c(8L, 2L, 1L, 3L)
typeof(x_int)  # "integer"
```

]


.pull-right[
Logical data type and class:


```{r}
x_is_one <- x == 1
typeof(x_is_one)  # "logical"

object_class <- class(x)
object_class  # "numeric"
```

]



---



class: middle

# Atomic Vectors and lists


.pull-left[
<br>
.bq.font90[
- R uses two types of vectors to store info

    - **atomic vectors**: all entries have the same data type 
    - **lists**: entries can contain other objects that can differ in data type
]    
]

.pull-right[

<img src="images/atomic_vectors.png" width="110%" height="110%"> <br>

]

---

class: middle

# Examples of Vector Types

.bq[
Atomic vector (numeric):

```{r}
atomic_vector <- c(1, 2, 3, 4)
class(atomic_vector)  # "numeric"
```

]

.bq[
List with multiple data types:
```{r}
my_list <- list(name = "John", age = 30, salary = 50000)
class(my_list)  # "list"
```


]


---

class: middle


# Atomic Vectors: Matrices

.bq.font90[
- You can add **attributes**, such as **dimension**, to vectors
- A **matrix** is a 2-dimensional vector containing entries of the same type
]

.pull-left[Creating a matrix with dimensions:
```{r}
my_matrix <- matrix(1:9, nrow = 3, ncol = 3)
class(my_matrix)  # "matrix"
my_matrix
typeof(my_matrix)
```

]
.pull-right[Adding dimensions to a vector:
```{r}
my_vector <- c(1, 2, 3, 4, 5, 6)
dim(my_vector) <- c(2, 3)
my_vector
class(my_vector)
typeof(my_vector)
```

]



---

class: middle

# Creating Matrices Using Vector Binding

.bq.font80[
- Bind vectors of the same length to create columns or rows
- Use `cbind()` for column binding and `rbind()` for row binding
]

.pull-left[Column binding with `cbind()`:

```{r}
x <- c(1, 2, 3, 4)
x_col <- cbind(x = x, y = 2 * x)
x_col
```

]

.pull-right[Row binding with `rbind()`:

```{r}
x_row <- rbind(x1 = x, x2 = x * 2)
x_row
```


]

---

class: middle

# Implicit and Explicit Coercion in R

.pull-left[
## Implicit Coercion 

.bq.font90[
- R defaults to the most complex data type if more than one type is given
]

```{r}
y <- c(1, 2, "a", NULL, TRUE)
typeof(y)
class(y)
y
```

]


.pull-right[

## Explicit coercion


.bq.font90[Intentionally force a different data type from the "default" type]

```{r}
y <- as.character(c(1, 2, "a", NULL, TRUE))
typeof(y)
class(y)
y
```

]

---

class: middle

# Logical Vectors coercion

.bql[Logical values coerced into 0 for .b[FALSE] and 1 for .b[TRUE] when applying math functions]

```{r}
x <- c(8, 2, 1, 3)
x >= 5  # which entries >= 5?
sum(x >= 5)  # how many >= 5?
```

- Mean of a Logical Vector

```{r}
mean(x >= 5) 
```

---

class: middle

# Examples: Coercion of Logical Values

.pull-left[
Sum of Logical Values
```{r}
grades <- c(80, 60, 95, 70, 85)
passing_grades <- grades >= 65
sum(passing_grades)  # count of passing grades
```


]

.pull-right[
Mean of Logical Values
```{r}
rainfall <- c(1.2, 0, 2.5, 0.8, 0, 0)
rainy_days <- rainfall > 0
mean(rainy_days)  # proportion of rainy days

```


]

---

# Data types: factors 

- Factors are a class of data that are stored as **integers**

.code80[
```{r}
x_fct <- as.factor(c("yes", "no", "no"))
class(x_fct)
typeof(x_fct)
```
]

--

.bq.font80[The attribute `levels` is a character vector of possible values
  - Values are stored as the integers (1=first `level`, 2=second `level`, etc.)
  - Levels are ordered alphabetically/numerically (unless specified otherwise)
]
    
--

```{r}
str(x_fct)
levels(x_fct)
```
---

# Subsetting: Atomic Vector and Matrices


- subset with `[]` by referencing index value (from 1 to vector length):

```{r}
x
x[c(4, 2)]  # get 4th and 2nd entries
```

- subset by omitting entries

```{r}
x[-c(4, 2)]  # omit 4th and 2nd entries
```

- subset with a logical vector

```{r}
# get 1st and 3rd entries
x[c(TRUE, FALSE, TRUE, FALSE)]
```


---

class: middle

# Subsetting: Matrices

- Access entries using subsetting `[row,column]`

.pull-left[
```{r}
x_col
```
]
.pull-right[


```{r}
x_col[, 1] # first column
```



```{r}
x_col[1:2, 1] # first 2 rows of first column
```
]

.blue-h[R Doesn't Always Preserve Class]

```{r, inline = FALSE}
# one row (or col) is no longer a matrix (1D)
class(x_col[1,])  
```



---

# Subsetting: Atomic Vector and Matrices

- You can access entries like a matrix:

.pull-left[
```{r}
x_df <- data.frame(x = x, double_x = x*2)
x_df
```
]

.pull-right[

```{r}
x_df[, 1]  # first column, all rows
```

]


--

 or access columns with `$`

```{r}
x_df$x  # get variable x column
```


```{r}
# first column is no longer a dataframe
class(x_df[, 1])  
```



---

class: middle

# Data frames or Tibbles


.bq.font80[
### Tibbles
- are a new modern data frame

- never changes the input data types

- can have columns that are lists

- can have non-standard variable names

  - can start with a number or contain spaces
]


---

class: middle

# Subsetting data frames



- Can also use column names to subset:

```{r}
library(babynames)
# get 2 rows of Name and Sex
babynames[1:2, c("name", "sex")] 
```



---

# Lists in R

.pull-left-60[
## Lists: Flexible Data Containers
- List is a vector with entries that can be different object types

```{r}
my_list <- list(myVec = x, 
                myDf = x_df, 
                myString = c("hi", "bye"))
my_list
```


]

.pull-right-40[
## Accessing List Elements
- Like a data frame, use the $ to access named objects stored in the list

```{r}
my_list$myDf
```

```{r}
class(my_list$myDf)
```


]

---

# Subsetting Lists with Single Brackets


.bq.font80[
- One `[]` operator gives you the object at the given location but preserves the list type
- `my_list[2]` returns a list of length one with entry `myDf`]

```{r}
my_list[2]
```


```{r}
str(my_list[2])
```

---

class: middle

# Subsetting Lists with Double Brackets

.bq.font80[
- The double `[[]]` operator gives you the object stored at that location (equivalent to using $)
- `my_list[[2]]` or `my_list[["myDf"]]` return the data frame `myDf`]


```{r}
my_list[[2]]
str(my_list[[2]])
```


---

class: middle

# List Subsetting Recap

.bql[
- Single brackets `[]` preserve the list type
- Double brackets `[[]]` return the object stored at the location
- Use `$` to access named objects in a list
]


---

class: action, middle

# <i class="fa fa-pencil-square-o" style="font-size:48px;color:purple">&nbsp;Group&nbsp;Activity&nbsp;`r (yt <- yt + 1)`</i>    


.pull-left-40[
![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)
]
.pull-right-60[
<br>
.bq.font80[
- Let's go over to maize server/ local Rstudio and our class [moodle](https://moodle.carleton.edu/course/view.php?id=41417)
- Get the class activity 3 file
- Please work on the problems 
- Talk to your neighbor or ask me questions
]
]

`r countdown(minutes = 10, seconds = 00, top = 0 , color_background = "inherit", padding = "3px 4px", font_size = "2em")`
