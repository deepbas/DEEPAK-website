<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Web Scraping</title>
    <meta charset="utf-8" />
    <meta name="author" content="Bastola" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="libs/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.min.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <script src="https://use.fontawesome.com/5235085b15.js"></script>

    <link rel="stylesheet" href="css/xaringan-themer-solns.css" type="text/css" />
    <link rel="stylesheet" href="css/my-theme.css" type="text/css" />
    <link rel="stylesheet" href="css/my-font.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">










layout: true
  
---

class: title-slide, middle

# .fancy[Web Scraping]

### .fancy[Stat 220]

 February 04 2024

---

class: inverse, middle

.Large[Web scraping]


.bql.Large[
the process of downloading, parsing, and extracting data presented in an HTML file and then converting it into a structured format that allows us to analyze it.]


---

class: middle

# .purple[Two different scenarios:]

.font100.bq[
1. .bold[Screen scraping:] extract data from source code of website, with html parser (easy) or regular expression matching (less easy).

2. .bold[Web APIs (application programming interface):] website offers a set of structured http requests that return JSON or XML files.
]

&lt;!-- API is a messenger that takes requests, and then returns a response back to you --&gt;
---

class: middle


background-image: url("images/polite.png") 
background-position: left 
background-size: 300px, 90% 90%

##  `polite` package


.pull-right-60[


.bq[

- Two main functions `bow` and `scrape` define and realize a web harvesting session
- Builds on awesome toolkits for defining and managing http sessions using `rvest`
]
]


.footnote[[Polite Documentation](https://www.rdocumentation.org/packages/polite/versions/0.1.2)]

---


class: center, inverse, top
background-image: url("images/mncorn.png")
background-size: cover

--

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

## .yellow.font150[Can we scrape this webpage?]



---

class: middle


# `polite`:: bow() 


.font120[

```r
session &lt;- bow("https://www.mncorn.org/corn-facts/", 
               user_agent = "data enthusiast")
```


```r
session
&lt;polite session&gt; https://www.mncorn.org/corn-facts/
    User-agent: data enthusiast
    robots.txt: 2 rules are defined for 1 bots
   Crawl delay: 5 sec
*  The path is scrapable for this user-agent
```


]


---

class: middle

# `polite`:: scrape()

.font120[

```r
session &lt;- session %&gt;%
  scrape()
```
]


```r
session
{html_document}
*&lt;html class="no-js" lang="en-US"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body class="page-template page-template-page-cornfacts page-template-pag ...
```


---

class: middle

# HyperText Markup Language (HTML)

&lt;!-- 

- Each line of code tells the browser how to show every element in your display by assigning tags to each component within the body tag. --&gt;

&lt;!-- - Most of the data on the web is still largely available as HTML --&gt;

&gt; HTML page consists of series of elements which browsers use to interpret how to display the content

&lt;img src="images/html.png"  width="600" height="400" class="center"&gt;

&lt;br&gt;


&lt;!--
- Contains all the metadata inside the head tag

- Only need to understand the document’s body tag as there’s where the content we want to scrape resides.

--&gt;


---

## HyperText Markup Language (HTML)

.bqt.font70[While it is structured (hierarchical/tree based) it often is not available in a form useful for analysis (flat/tidy).]


.font120[
```html
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;This is a title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p align="center"&gt;Hello world!&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
```
]

.footnote[Try HTML code yourself by clicking [here](https://www.w3schools.com/html/tryit.asp?filename=tryhtml_default_default)]

---

## HTML tags

&gt; HTML uses `tags` to describe different aspects of document content

&lt;br&gt;
&lt;br&gt;

.font120[
Tag         |  Example
------------|---------------------------------------------------------------
heading     | `&lt;h1&gt;My Title&lt;/h1&gt;`
paragraph   | `&lt;p&gt;A paragraph of content...&lt;/p&gt;`
table       | `&lt;table&gt; ... &lt;/table&gt;`
anchor (with attribute)     | `&lt;a href="https://www.mncorn.org/"&gt;click here for link&lt;/a&gt;`
]

---

class: middle

.pull-left-40[

&lt;img src="images/rvest.png"  width="200" height="150" class="center"&gt;


]

.pull-right-60[
# `Rvest`: collection of functions that make basic processing and manipulation of HTML data straight forward.
]


.font100[
Function      | Description
--------------|---------------------------------------------
`read_html`   | Read HTML data from a url or character string
`html_node `  | Select a specified node from HTML document
`html_nodes`  | Select specified nodes from HTML document
`html_table`  | Parse an HTML table into a data frame
`html_text`   | Extract tag pairs' content
`html_name`   | Extract tags' names
`html_attrs`  | Extract all of each tag's attributes
`html_attr`   | Extract tags' attribute value by name

]

---

background-image: url(images/f1_drivers.png)
background-position: center
background-size: 80%

# .center[https://en.wikipedia.org/wiki/List_of_Formula_One_drivers]

---

count: false
 
## Demo: read tables into R
.panel1-demo1-auto[

```r
*bow("https://en.wikipedia.org/wiki/List_of_Formula_One_drivers")
```
]
 
.panel2-demo1-auto[

```
&lt;polite session&gt; https://en.wikipedia.org/wiki/List_of_Formula_One_drivers
    User-agent: polite R package
    robots.txt: 456 rules are defined for 33 bots
   Crawl delay: 5 sec
  The path is scrapable for this user-agent
```
]

---
count: false
 
## Demo: read tables into R
.panel1-demo1-auto[

```r
bow("https://en.wikipedia.org/wiki/List_of_Formula_One_drivers") %&gt;%
* scrape()
```
]
 
.panel2-demo1-auto[

```
{html_document}
&lt;html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-client-preferences-disabled vector-feature-client-prefs-pinned-disabled vector-toc-not-available" lang="en" dir="ltr"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr ...
```
]

---
count: false
 
## Demo: read tables into R
.panel1-demo1-auto[

```r
bow("https://en.wikipedia.org/wiki/List_of_Formula_One_drivers") %&gt;%
  scrape() %&gt;%
* html_table()
```
]
 
.panel2-demo1-auto[

```
[[1]]
# A tibble: 6 × 1
  `Formula One`                                                                 
  &lt;chr&gt;                                                                         
1 "Upcoming season\n2024 Formula One World Championship"                        
2 "Related articles\nHistory of Formula One\nFormula One racing\nFormula One re…
3 "Lists\nDrivers (GP winnersSprint winnersPolesittersFastest lapsChampionsNumb…
4 "Records\nDrivers\nConstructors\nEngines\nTyres\nRaces"                       
5 "Organisations\nFIA\nFIA World Motor Sport Council\nFormula One Group\nLibert…
6 ".mw-parser-output .navbar{display:inline;font-size:88%;font-weight:normal}.m…

[[2]]
# A tibble: 3 × 2
  Symbol Meaning                                                                
  &lt;chr&gt;  &lt;chr&gt;                                                                  
1 ~      Currently active world champions(driver competes in 2023 and has won t…
2 *      Currently active drivers(driver competes in 2023 and has not won the W…
3 ^      Former world champions(driver has won the World Drivers' Championship …

[[3]]
# A tibble: 868 × 11
   `Driver name`     Nationality    `Seasons competed` `Drivers' Championships`
   &lt;chr&gt;             &lt;chr&gt;          &lt;chr&gt;              &lt;chr&gt;                   
 1 Carlo Abate       Italy          1962–1963          0                       
 2 George Abecassis  United Kingdom 1951–1952          0                       
 3 Kenny Acheson     United Kingdom 1983, 1985         0                       
 4 Andrea de Adamich Italy          1968, 1970–1973    0                       
 5 Philippe Adams    Belgium        1994               0                       
 6 Walt Ader         United States  1950               0                       
 7 Kurt Adolff       West Germany   1953               0                       
 8 Fred Agabashian   United States  1950–1957          0                       
 9 Kurt Ahrens Jr.   West Germany   1966–1969          0                       
10 Jack Aitken       United Kingdom 2020               0                       
# ℹ 858 more rows
# ℹ 7 more variables: `Race entries` &lt;chr&gt;, `Race starts` &lt;chr&gt;,
#   `Pole positions` &lt;chr&gt;, `Race wins` &lt;chr&gt;, Podiums &lt;chr&gt;,
#   `Fastest laps` &lt;chr&gt;, `Points[a]` &lt;chr&gt;

[[4]]
# A tibble: 42 × 7
   Country    Totaldrivers Champions Championships `Race wins` `First driver(s)`
   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;            
 1 Argentina… 25           1(Fangio… 5(1951, 1954… "38\n(Fang… Juan Manuel Fang…
 2 Australia… 18           2(Brabha… 4(1959, 1960… "43\n(Brab… Tony Gaze(1952 B…
 3 Austriade… 16           2(Rindt,… 4(1970, 1975… "41\n(Rind… Jochen Rindt(196…
 4 Belgiumde… 24           0         0             "11\n(Ickx… Johnny Claes(195…
 5 Brazildet… 32           3(Fittip… 8(1972, 1974… "101\n(Fit… Chico Landi(1951…
 6 Canadadet… 15           1(J. Vil… 1(1997)       "17\n(G. V… Peter Ryan(1961 …
 7 Chile      1            0         0             "0"         Eliseo Salazar(1…
 8 China      1            0         0             "0"         Zhou Guanyu(2022…
 9 Colombiad… 3            0         0             "7\n(Monto… Ricardo Londoño(…
10 Czech Rep… 1            0         0             "0"         Tomáš Enge(2001 …
# ℹ 32 more rows
# ℹ 1 more variable: `Most recent driver(s)/Current driver(s)` &lt;chr&gt;

[[5]]
# A tibble: 1 × 2
  `vteFormula One drivers by country`                     vteFormula One drive…¹
  &lt;chr&gt;                                                   &lt;chr&gt;                 
1 "Argentina\nAustralia\nAustria\nBelgium\nBrazil\nCanad… "Argentina\nAustralia…
# ℹ abbreviated name: ¹​`vteFormula One drivers by country`
```
]

---
count: false
 
## Demo: read tables into R
.panel1-demo1-auto[

```r
bow("https://en.wikipedia.org/wiki/List_of_Formula_One_drivers") %&gt;%
  scrape() %&gt;%
  html_table() %&gt;%
* purrr::pluck(3)
```
]
 
.panel2-demo1-auto[

```
# A tibble: 868 × 11
   `Driver name`     Nationality    `Seasons competed` `Drivers' Championships`
   &lt;chr&gt;             &lt;chr&gt;          &lt;chr&gt;              &lt;chr&gt;                   
 1 Carlo Abate       Italy          1962–1963          0                       
 2 George Abecassis  United Kingdom 1951–1952          0                       
 3 Kenny Acheson     United Kingdom 1983, 1985         0                       
 4 Andrea de Adamich Italy          1968, 1970–1973    0                       
 5 Philippe Adams    Belgium        1994               0                       
 6 Walt Ader         United States  1950               0                       
 7 Kurt Adolff       West Germany   1953               0                       
 8 Fred Agabashian   United States  1950–1957          0                       
 9 Kurt Ahrens Jr.   West Germany   1966–1969          0                       
10 Jack Aitken       United Kingdom 2020               0                       
# ℹ 858 more rows
# ℹ 7 more variables: `Race entries` &lt;chr&gt;, `Race starts` &lt;chr&gt;,
#   `Pole positions` &lt;chr&gt;, `Race wins` &lt;chr&gt;, Podiums &lt;chr&gt;,
#   `Fastest laps` &lt;chr&gt;, `Points[a]` &lt;chr&gt;
```
]

&lt;style&gt;
.panel1-demo1-auto {
  color: black;
  width: 39.2%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 90%
}
.panel2-demo1-auto {
  color: black;
  width: 58.8%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 90%
}
.panel3-demo1-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 90%
}
&lt;/style&gt;





---

class: middle, inverse

# CSS 

.bql[
- CSS (Cascading Style Sheets) is a language that describes how HTML elements should be displayed. 

- .bold[CSS selectors:] 

  * shortcuts for selecting HTML elements to style  
  * can also be used to extract the content of these elements

]

---

# SelectorGadget

.bq.font80[SelectorGadget is a point-and-click CSS selector, specifically for .bold[Chrome],  and it comes as a [Chrome Extension](https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb) .red[(Click to install!)]
]

&lt;br&gt;

![](images/best-picture-2023.png)

.footnote[Click [here](https://www.w3schools.com/cssref/css_selectors.asp) for a list of selectors ]
---

## SelectorGadget: select all elements that are related to that object. Next, de-select anything in yellow you do not want


&lt;center&gt;
&lt;img src="images/selector.gif"  width="650" height="500" class="center"&gt;
&lt;/center&gt;

---

class: middle

## Read HTML into R

.code80[

```r
webpage &lt;- bow('https://www.imdb.com/search/title/?groups=best_picture_winner&amp;sort=year,desc&amp;count=100&amp;view=advanced') %&gt;%
  scrape()
```
]

.code100[

```r
webpage
{html_document}
&lt;html lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body&gt;\n&lt;div&gt;    &lt;img height="1" width="1" style="display:none;visibility ...
```
]

.footnote[Click [here](https://www.imdb.com/search/title/?groups=best_picture_winner&amp;sort=year,desc&amp;count=100&amp;view=advanced) to go to webpage]

---

# Extract titles

Use `html_nodes()` to extract pieces out of HTML documents

.code100[

```r
title_data &lt;- webpage %&gt;% html_nodes(".lister-item-header a") %&gt;% html_text()
```
]
.scroll-box-14[

```r
title_data
character(0)
```
]

---

# Scrapped table


.scroll-output[
<div class="datatables html-widget html-fill-item" id="htmlwidget-09c8aaf88c077ba86eeb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-09c8aaf88c077ba86eeb">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[[],[],[],[],[],[],[]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>Title<\/th>\n      <th>Description<\/th>\n      <th>Runtime<\/th>\n      <th>Rating<\/th>\n      <th>Votes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Year","targets":1},{"name":"Title","targets":2},{"name":"Description","targets":3},{"name":"Runtime","targets":4},{"name":"Rating","targets":5},{"name":"Votes","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
]

.footnote[ [Original webpage](https://www.imdb.com/search/title/?count=100&amp;groups=oscar_best_picture_winners&amp;sort=year%2Cdesc&amp;ref_=nv_ch_osc)]

---


class: action, middle

# &lt;i class="fa fa-pencil-square-o" style="font-size:48px;color:purple"&gt;&amp;nbsp;Group&amp;nbsp;Activity&amp;nbsp;1&lt;/i&gt;    


.pull-left-40[
![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)
]
.pull-right-60[
&lt;br&gt;
.bql[
- Let's go over to maize server/ local Rstudio and our class [moodle](https://moodle.carleton.edu/course/view.php?id=41417)
- Get the class activity 16.Rmd file
- Work on activity 1
- Ask me questions
]

]

<div class="countdown" id="timer_e1c5cc07" data-update-every="1" tabindex="0" style="top:0;right:0;padding:3px 4px;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">15</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


---

background-image: url(images/imdb_tvshows_2023.png)
background-position: center
background-size: 100% 98%

# .center[http://www.imdb.com/chart/tvmeter]

---

# Scrapped table

.scroll-output[
<div class="datatables html-widget html-fill-item" id="htmlwidget-c59bdc5712fd7bb863b1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c59bdc5712fd7bb863b1">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[[],[],[],[],[]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>rank<\/th>\n      <th>name<\/th>\n      <th>score<\/th>\n      <th>year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"rank","targets":1},{"name":"name","targets":2},{"name":"score","targets":3},{"name":"year","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
]


---

class: action, middle

# &lt;i class="fa fa-pencil-square-o" style="font-size:48px;color:purple"&gt;&amp;nbsp;Group&amp;nbsp;Activity&amp;nbsp;2&lt;/i&gt;    


.pull-left-40[
![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)
]
.pull-right-60[
&lt;br&gt;
&lt;br&gt;
.bq[
- Work on activity 2
- Ask me questions
]

]

<div class="countdown" id="timer_f8ca2271" data-update-every="1" tabindex="0" style="top:0;right:0;padding:3px 4px;font-size:2em;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "googlecode",
"highlightLines": true,
"highlightLanguage": ["r", "css", "yaml"],
"countIncrementalSlides": true,
"slideNumberFormat": "%current%",
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
